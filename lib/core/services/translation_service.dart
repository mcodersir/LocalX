import 'package:flutter/material.dart';
import 'package:provider/provider.dart';
import 'settings_service.dart';

class AppTranslations {
  static const Map<String, Map<String, String>> translations = {
    'en': {
      'app_name': 'LocalX',
      'version_manager': 'Version Manager',
      'scanning': 'Scanning...',
      'rescan': 'Rescan',
      'manage_installed': 'Manage installed software versions',
      'not_installed': 'Not installed',
      'download': 'Download',
      'available_versions': 'Available Versions',
      'active': 'ACTIVE',
      'installed': 'Installed',
      'use': 'Use',
      'install': 'Install',
      'settings': 'Settings',
      'configure_env': 'Configure your development environment',
      'appearance': 'Appearance',
      'theme': 'Theme',
      'choose_theme': 'Choose your preferred theme',
      'light': 'Light',
      'dark': 'Dark',
      'system': 'System',
      'language': 'Language',
      'choose_language': 'Choose application language',
      'ports': 'Ports',
      'general': 'General',
      'auto_start': 'Auto-start services',
      'auto_start_desc': 'Start services when app launches',
      'start_minimized': 'Start minimized',
      'start_min_desc': 'Minimize to system tray on launch',
      'minimize_to_tray': 'Minimize to tray',
      'minimize_to_tray_desc': 'Hide app to system tray when minimized',
      'close_to_tray': 'Close to tray',
      'close_to_tray_desc': 'Keep running in tray when closing window',
      'about': 'About',
      'dashboard': 'Dashboard',
      'projects': 'Projects',
      'services': 'Services',
      'wizard': 'Wizard',
      'setup': 'Setup',
      'add_project': 'Add Project',
      'no_projects': 'No projects yet',
      'add_folder_desc': 'Add a project folder or create a new one with the wizard',
      'custom_domain': 'Custom Domain',
      'set_custom_url': 'Set a custom local URL',
      'instead_of_localhost': 'Instead of http://localhost, use a real-looking URL:',
      'domain': 'Domain',
      'quick_suggest': 'Quick suggestions',
      'hosts_mod_info': 'This modifies your hosts file to map the domain to 127.0.0.1',
      'skip': 'Skip',
      'set_domain': 'Set Domain',
      'open_browser': 'Open in Browser',
      'terminal': 'Terminal',
      'remove': 'Remove',
      'start_all': 'Start All',
      'stop_all': 'Stop All',
      'running': 'Running',
      'stopped': 'Stopped',
      'error': 'Error',
      'start': 'Start',
      'stop': 'Stop',
      'restart': 'Restart',
      'logs': 'Logs',
      'clear': 'Clear',
      'phpmyadmin': 'phpMyAdmin',
      'localhost': 'Localhost',
      'wizard_title': 'New Project Wizard',
      'wizard_desc': 'Create a new project using your favorite modern frameworks.',
      'step_1': '1. Choose Framework',
      'step_2': '2. Project Details',
      'step_3': '3. Create Project',
      'project_name': 'Project Name',
      'project_location': 'Project Location',
      'browse': 'Browse',
      'next': 'Next',
      'back': 'Back',
      'create': 'Create',
      'creating': 'Creating Project...',
      'success': 'Success',
      'project_created': 'Project created successfully!',
      'tray_open': 'Open LocalX',
      'tray_exit': 'Exit',
      'runtime': 'Runtime',
      'native': 'Native',
      'docker': 'Docker',
      'docker_fallback': 'Docker Fallback',
      'checksum_mismatch': 'Bundle checksum mismatch',
    },
    'fa': {
      'app_name': 'لوکال‌ایکس',
      'version_manager': 'مدیریت نسخه‌ها',
      'scanning': 'در حال اسکن...',
      'rescan': 'اسکن مجدد',
      'manage_installed': 'مدیریت نسخه‌های نصب شده',
      'not_installed': 'نصب نشده',
      'download': 'دانلود',
      'available_versions': 'نسخه‌های در دسترس',
      'active': 'فعال',
      'installed': 'نصب شده',
      'use': 'استفاده',
      'install': 'نصب',
      'settings': 'تنظیمات',
      'configure_env': 'پیکربندی محیط توسعه',
      'appearance': 'ظاهر',
      'theme': 'پوسته',
      'choose_theme': 'پوسته دلخواه خود را انتخاب کنید',
      'light': 'روشن',
      'dark': 'تاریک',
      'system': 'سیستم',
      'language': 'زبان',
      'choose_language': 'زبان برنامه را انتخاب کنید',
      'ports': 'پورت‌ها',
      'general': 'عمومی',
      'auto_start': 'شروع خودکار سرویس‌ها',
      'auto_start_desc': 'شروع سرویس‌ها هنگام باز شدن برنامه',
      'start_minimized': 'شروع به صورت مینیمایز',
      'start_min_desc': 'هنگام اجرا در System Tray قرار گیرد',
      'minimize_to_tray': 'مینیمایز به نوار اعلان',
      'minimize_to_tray_desc': 'هنگام مینیمایز به Tray منتقل می‌شود',
      'close_to_tray': 'بستن به Tray',
      'close_to_tray_desc': 'با بستن پنجره همچنان فعال بماند',
      'about': 'درباره',
      'dashboard': 'پیشخوان',
      'projects': 'پروژه‌ها',
      'services': 'سرویس‌ها',
      'wizard': 'جادوگر پروژه',
      'setup': 'راه‌اندازی',
      'add_project': 'افزودن پروژه',
      'no_projects': 'هیچ پروژه‌ای وجود ندارد',
      'add_folder_desc': 'یک پوشه اضافه کنید یا پروژه‌ای جدید بسازید',
      'custom_domain': 'دامنه سفارشی',
      'set_custom_url': 'تنظیم آدرس محلی سفارشی',
      'instead_of_localhost': 'به جای لوکال‌هاست، از آدرس‌های واقعی استفاده کنید:',
      'domain': 'دامنه',
      'quick_suggest': 'پیشنهادات سریع',
      'hosts_mod_info': 'این بخش فایل hosts سیستم را برای اتصال دامنه به 127.0.0.1 تغییر می‌دهد.',
      'skip': 'پرش',
      'set_domain': 'ثبت دامنه',
      'open_browser': 'باز کردن در مرورگر',
      'terminal': 'ترمینال',
      'remove': 'حذف',
      'start_all': 'شروع همه',
      'stop_all': 'توقف همه',
      'running': 'در حال اجرا',
      'stopped': 'متوقف شده',
      'error': 'خطا',
      'start': 'شروع',
      'stop': 'توقف',
      'restart': 'راه‌اندازی مجدد',
      'logs': 'لاگ‌ها',
      'clear': 'پاکسازی',
      'phpmyadmin': 'پی‌اچ‌پی مای ادمین',
      'localhost': 'لوکال‌هاست',
      'wizard_title': 'جادوگر پروژه جدید',
      'wizard_desc': 'ساخت پروژه‌های جدید با فریم‌ورک‌های مدرن محبوب.',
      'step_1': '1. انتخاب فریم‌ورک',
      'step_2': '2. مشخصات پروژه',
      'step_3': '3. ساخت پروژه',
      'project_name': 'نام پروژه',
      'project_location': 'محل نگهداری پروژه',
      'browse': 'انتخاب پوشه',
      'next': 'بعدی',
      'back': 'قبلی',
      'create': 'ساختن',
      'creating': 'در حال ساخت پروژه...',
      'success': 'موفقیت‌آمیز',
      'project_created': 'پروژه با موفقیت ساخته شد!',
      'tray_open': 'باز کردن LocalX',
      'tray_exit': 'خروج',
      'runtime': 'ران‌تایم',
      'native': 'بومی',
      'docker': 'داکر',
      'docker_fallback': 'داکر (پشتیبان)',
      'checksum_mismatch': 'ناهمخوانی چک‌سام باندل',
    }
  };

  static String tr(String locale, String key, [String fallback = '']) {
    return translations[locale]?[key] ?? translations['en']?[key] ?? (fallback.isEmpty ? key : fallback);
  }
}

// Helper extension for context
extension LocalizationExt on BuildContext {
  String tr(String key) {
    final lang = watch<SettingsService>().language;
    return AppTranslations.tr(lang, key);
  }
}
